<template>
  <div class="dashboard">
    <PermanentFull :menuItems="menuItems">
      <div
        id="content-dashboard-wrapper"
        class="md-layout-item d-flex flex-column"
      >
        <!-- Loader -->
        <div class="loader-content" v-if="loading">
          <p class="msg">{{ $t("loading") }}</p>
          <md-progress-spinner md-mode="indeterminate"></md-progress-spinner>
        </div>
        <!-- /Loader -->
        <div id="commande" class="mx-0">
          <div class="d-flex flex-column justify-content-center">
            <router-link to="/abonnement" class="back mb-3 align-self-start"
              ><i class="fa fa-chevron-left" aria-hidden="true"></i>
              {{ $t("back") }}</router-link
            >
            <div class="titre-page">{{ $t("myOrder") }}</div>
            <p class="description pl-0">{{ $t("lastLine") }}.</p>
          </div>
          <div class="md-layout md-gutter column-wrapper px-3">
            <div
              class="md-layout-item dashboard-border bloc-content left d-flex flex-column align-items-center justify-content-center"
            >
              <div
                class="titre-wrapper d-flex flex-column justify-content-center align-items-center"
              >
                <h2 class="titre">{{ $t("payement") }}</h2>
                <p class="description text-center">{{ $t("giveCredit") }}.</p>
              </div>
              <div class="form-abonnement w-100 mt-3 mx-auto">
                <div class="form-group">
                  <md-field>
                    <label>{{ $t("ownerName") }}</label>
                    <md-input
                      v-model="name"
                      :class="EmptyNameErrorMessage && 'error-input'"
                    ></md-input>
                  </md-field>
                  <span class="error">{{ EmptyNameErrorMessage }}</span>
                </div>

                <div
                  :class="
                    cardNumberErrorMessage
                      ? 'boxInput boxInputError'
                      : 'form-group boxInput'
                  "
                >
                  <div class="form-group">
                    <label>{{ $t("cardNumber") }}</label>
                    <div id="card-number" class="input-form-wrapper"></div>
                  </div>
                  <div class="div-stripe-error">
                    <span class="error">{{ cardNumberErrorMessage }}</span>
                  </div>
                </div>
                <div class="row">
                  <div
                    class="col-md-6"
                    :class="
                      MMAA_ErrorMessage ? 'boxInput boxInputError' : 'boxInput'
                    "
                  >
                    <div class="form-group">
                      <label>MM/AA</label>
                      <div id="card-expiry"></div>
                    </div>
                    <div class="div-stripe-error">
                      <span class="error">{{ MMAA_ErrorMessage }}</span>
                    </div>
                  </div>
                  <div
                    class="col-md-6"
                    :class="
                      CVC_ErrorMessage ? ' boxInput boxInputError' : 'boxInput'
                    "
                  >
                    <div class="form-group">
                      <label>CVC</label>
                      <div id="card-cvc"></div>
                    </div>
                    <div class="div-stripe-error">
                      <span class="error">{{ CVC_ErrorMessage }}</span>
                    </div>
                  </div>
                </div>

                <div class="w-100 text-center">
                  <md-progress-spinner
                    v-if="loader"
                    md-mode="indeterminate"
                  ></md-progress-spinner>
                  <md-button
                    v-if="!loader"
                    class="submit-dialog text-center btn-submit text-center w-100 text-uppercase p-0 m-0 mb-3"
                    style="height: 52px"
                    @click="createToken()"
                    :disabled="visible"
                  >
                    {{ $t("pay") }}
                  </md-button>
                </div>
              </div>
              <p class="paiement-description text-center">
                {{ $t("paymentSecure") }} <strong>Stripe</strong>
              </p>
              <ul
                class="list-paiements list-unstyled d-flex align-items-center justify-content-center"
              >
                <li class="m-1">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="61.8"
                    height="19.9"
                    viewBox="0 0 61.8 19.9"
                  >
                    <path
                      id="Tracé_42216"
                      data-name="Tracé 42216"
                      d="M99.4,98.4l-8.1,19.3H86l-4-15.4a2.2,2.2,0,0,0-1.2-1.7A20.132,20.132,0,0,0,75.9,99l.1-.6h8.5a2.262,2.262,0,0,1,2.3,2l2.1,11.2,5.2-13.1h5.3Zm20.7,13c0-5.1-7-5.4-7-7.6,0-.7.7-1.4,2.1-1.6a8.7,8.7,0,0,1,4.9.9L121,99a13.98,13.98,0,0,0-4.7-.9c-4.9,0-8.4,2.6-8.4,6.4,0,2.8,2.5,4.3,4.4,5.2s2.6,1.5,2.6,2.4c0,1.3-1.5,1.9-3,1.9a11.133,11.133,0,0,1-5.1-1.2l-.9,4.2a15.434,15.434,0,0,0,5.5,1c5.2,0,8.6-2.6,8.7-6.6m13,6.3h4.6l-4-19.3h-4.3a2.209,2.209,0,0,0-2.1,1.4l-7.5,17.9H125l1-2.9h6.4Zm-5.6-6.8,2.6-7.2,1.5,7.2Zm-21-12.5-4.1,19.3h-5l4.1-19.3h5Z"
                      transform="translate(-75.9 -98.1)"
                      fill="#1a1f71"
                    />
                  </svg>
                </li>
                <li class="m-1">
                  <svg
                    id="mc_vrt_pos"
                    xmlns="http://www.w3.org/2000/svg"
                    width="55.731"
                    height="45.714"
                    viewBox="0 0 55.731 45.714"
                  >
                    <rect
                      id="Rectangle_18991"
                      data-name="Rectangle 18991"
                      width="55.731"
                      height="45.714"
                      fill="none"
                    />
                    <g
                      id="Groupe_52749"
                      data-name="Groupe 52749"
                      transform="translate(5.753 5.754)"
                    >
                      <path
                        id="Tracé_42225"
                        data-name="Tracé 42225"
                        d="M349.541,342.739v-2.277a1.351,1.351,0,0,0-1.427-1.442,1.405,1.405,0,0,0-1.275.645,1.333,1.333,0,0,0-1.2-.645,1.2,1.2,0,0,0-1.063.539v-.448h-.79v3.629h.8v-2.012a.849.849,0,0,1,.888-.964c.524,0,.79.342.79.957v2.019h.8v-2.012a.856.856,0,0,1,.888-.964c.539,0,.8.342.8.957v2.019Zm11.8-3.629h-1.291v-1.1h-.8v1.1h-.736v.721h.736v1.655c0,.843.326,1.344,1.26,1.344a1.854,1.854,0,0,0,.987-.281l-.228-.676a1.458,1.458,0,0,1-.7.2c-.395,0-.524-.243-.524-.607v-1.64h1.291Zm6.734-.091a1.07,1.07,0,0,0-.957.531v-.44h-.782v3.629h.79V340.7c0-.6.258-.934.774-.934a1.287,1.287,0,0,1,.493.091l.243-.744A1.688,1.688,0,0,0,368.072,339.019Zm-10.18.38a2.714,2.714,0,0,0-1.48-.38c-.919,0-1.511.44-1.511,1.162,0,.592.44.957,1.253,1.07l.372.053c.433.061.638.175.638.38,0,.281-.289.44-.827.44a1.933,1.933,0,0,1-1.207-.38l-.372.615a2.619,2.619,0,0,0,1.571.471c1.048,0,1.655-.494,1.655-1.184,0-.638-.478-.972-1.268-1.086l-.372-.053c-.342-.046-.615-.114-.615-.357,0-.266.258-.425.691-.425a2.339,2.339,0,0,1,1.131.311Zm21.15-.38a1.07,1.07,0,0,0-.957.531v-.44H377.3v3.629h.789V340.7c0-.6.258-.934.774-.934a1.287,1.287,0,0,1,.493.091l.243-.744A1.688,1.688,0,0,0,379.042,339.019Zm-10.173,1.905a1.833,1.833,0,0,0,1.936,1.906,1.9,1.9,0,0,0,1.306-.433l-.38-.638a1.6,1.6,0,0,1-.949.326,1.164,1.164,0,0,1,0-2.323,1.6,1.6,0,0,1,.949.326l.38-.638a1.9,1.9,0,0,0-1.306-.433,1.833,1.833,0,0,0-1.936,1.905Zm7.394,0v-1.814h-.79v.44a1.377,1.377,0,0,0-1.146-.531,1.908,1.908,0,0,0,0,3.811,1.377,1.377,0,0,0,1.146-.531v.44h.789Zm-2.938,0a1.089,1.089,0,1,1,.3.822,1.1,1.1,0,0,1-.3-.822Zm-9.528-1.905a1.907,1.907,0,0,0,.053,3.811,2.205,2.205,0,0,0,1.488-.509l-.387-.585a1.729,1.729,0,0,1-1.055.38,1.008,1.008,0,0,1-1.086-.888h2.695c.008-.1.015-.2.015-.3a1.74,1.74,0,0,0-1.723-1.905Zm-.015.706a.9.9,0,0,1,.919.881h-1.883a.934.934,0,0,1,.964-.881Zm19.807,1.2v-3.272h-.79v1.9a1.377,1.377,0,0,0-1.146-.531,1.908,1.908,0,0,0,0,3.811,1.377,1.377,0,0,0,1.146-.531v.44h.79Zm1.316,1.289a.362.362,0,0,1,.143.028.37.37,0,0,1,.117.077.364.364,0,0,1,.079.115.355.355,0,0,1,0,.28.366.366,0,0,1-.079.114.378.378,0,0,1-.117.078.358.358,0,0,1-.143.029.367.367,0,0,1-.341-.221.355.355,0,0,1,0-.28.366.366,0,0,1,.078-.115.36.36,0,0,1,.117-.077.372.372,0,0,1,.145-.028Zm0,.642a.268.268,0,0,0,.109-.022.286.286,0,0,0,.088-.06.283.283,0,0,0,0-.4.28.28,0,0,0-.088-.06.272.272,0,0,0-.109-.022.284.284,0,0,0-.111.022.277.277,0,0,0-.09.06.282.282,0,0,0,.2.48Zm.021-.45a.153.153,0,0,1,.1.029.1.1,0,0,1,.035.078.091.091,0,0,1-.028.068.133.133,0,0,1-.079.033l.11.126h-.086l-.1-.126h-.033v.126h-.072v-.335Zm-.083.063v.089h.082a.081.081,0,0,0,.045-.011.038.038,0,0,0,.017-.034.037.037,0,0,0-.017-.033.082.082,0,0,0-.045-.011Zm-4.192-1.543a1.089,1.089,0,1,1,.3.822A1.1,1.1,0,0,1,380.651,340.925Zm-26.662,0v-1.814h-.79v.44a1.377,1.377,0,0,0-1.146-.531,1.908,1.908,0,0,0,0,3.811,1.377,1.377,0,0,0,1.146-.531v.44h.79Zm-2.938,0a1.088,1.088,0,1,1,.3.822,1.1,1.1,0,0,1-.3-.822Z"
                        transform="translate(-341.496 -308.533)"
                        fill="#231f20"
                      />
                      <g id="Groupe_52748" data-name="Groupe 52748">
                        <rect
                          id="Rectangle_18992"
                          data-name="Rectangle 18992"
                          width="11.959"
                          height="21.49"
                          transform="translate(16.133 2.922)"
                          fill="#ff5f00"
                        />
                        <path
                          id="Tracé_42226"
                          data-name="Tracé 42226"
                          d="M354.646,274.616a13.643,13.643,0,0,1,5.22-10.745,13.667,13.667,0,1,0,0,21.49A13.643,13.643,0,0,1,354.646,274.616Z"
                          transform="translate(-337.753 -260.949)"
                          fill="#eb001b"
                        />
                        <path
                          id="Tracé_42227"
                          data-name="Tracé 42227"
                          d="M418.112,274.617A13.666,13.666,0,0,1,396,285.362a13.669,13.669,0,0,0,0-21.49,13.666,13.666,0,0,1,22.112,10.745Z"
                          transform="translate(-373.887 -260.949)"
                          fill="#f79e1b"
                        />
                        <path
                          id="Tracé_42228"
                          data-name="Tracé 42228"
                          d="M450.362,318.39v-.44h.177v-.09h-.452v.09h.177v.44Zm.877,0v-.53H451.1l-.159.365-.159-.365h-.139v.53h.1v-.4l.149.345h.1l.149-.346v.4Z"
                          transform="translate(-407.441 -296.254)"
                          fill="#f79e1b"
                        />
                      </g>
                    </g>
                  </svg>
                </li>
                <li class="m-1">
                  <svg
                    id="ms_vrt_pos"
                    xmlns="http://www.w3.org/2000/svg"
                    width="55.722"
                    height="45.8"
                    viewBox="0 0 55.722 45.8"
                  >
                    <rect
                      id="Rectangle_18989"
                      data-name="Rectangle 18989"
                      width="55.722"
                      height="45.8"
                      fill="none"
                    />
                    <g
                      id="Groupe_52747"
                      data-name="Groupe 52747"
                      transform="translate(5.748 5.747)"
                    >
                      <path
                        id="Tracé_42221"
                        data-name="Tracé 42221"
                        d="M363.58,343.2v-2.275a1.349,1.349,0,0,0-1.425-1.441,1.4,1.4,0,0,0-1.274.644,1.331,1.331,0,0,0-1.2-.644,1.2,1.2,0,0,0-1.061.538v-.447h-.789V343.2h.8V341.19a.848.848,0,0,1,.887-.963c.523,0,.789.341.789.955V343.2h.8V341.19a.855.855,0,0,1,.887-.963c.538,0,.8.341.8.955V343.2Zm4.443-1.812v-1.812h-.789v.44a1.375,1.375,0,0,0-1.145-.531,1.905,1.905,0,0,0,0,3.806,1.375,1.375,0,0,0,1.145-.531v.44h.788Zm-2.934,0a1.087,1.087,0,1,1,.3.821,1.1,1.1,0,0,1-.3-.821Zm19.806-1.907a2.043,2.043,0,0,1,.778.146,1.9,1.9,0,0,1,.619.4,1.836,1.836,0,0,1,.409.6,2.013,2.013,0,0,1,0,1.514,1.835,1.835,0,0,1-.409.6,1.9,1.9,0,0,1-.619.4,2.147,2.147,0,0,1-1.555,0,1.875,1.875,0,0,1-.617-.4,1.852,1.852,0,0,1-.407-.6,2.015,2.015,0,0,1,0-1.514,1.854,1.854,0,0,1,.407-.6,1.878,1.878,0,0,1,.617-.4,2.043,2.043,0,0,1,.778-.146Zm0,.746a1.176,1.176,0,0,0-.45.085,1.065,1.065,0,0,0-.359.238,1.111,1.111,0,0,0-.238.367,1.319,1.319,0,0,0,0,.942,1.11,1.11,0,0,0,.238.367,1.065,1.065,0,0,0,.36.238,1.233,1.233,0,0,0,.9,0,1.086,1.086,0,0,0,.361-.238,1.1,1.1,0,0,0,.24-.367,1.319,1.319,0,0,0,0-.942,1.1,1.1,0,0,0-.24-.367,1.087,1.087,0,0,0-.361-.238,1.177,1.177,0,0,0-.45-.085Zm-12.582,1.162a1.738,1.738,0,0,0-1.721-1.9,1.9,1.9,0,0,0,.053,3.806,2.2,2.2,0,0,0,1.486-.508l-.387-.584a1.727,1.727,0,0,1-1.054.379,1.007,1.007,0,0,1-1.084-.887H372.3c.008-.1.015-.2.015-.3Zm-2.7-.318a.933.933,0,0,1,.963-.879.9.9,0,0,1,.917.879Zm6.02-.569a2.336,2.336,0,0,0-1.13-.311c-.432,0-.69.159-.69.425,0,.243.273.311.614.356l.371.053c.789.114,1.266.447,1.266,1.084,0,.69-.607,1.183-1.653,1.183a2.615,2.615,0,0,1-1.569-.47l.371-.614a1.931,1.931,0,0,0,1.206.379c.538,0,.826-.159.826-.44,0-.2-.2-.318-.637-.379l-.372-.053c-.811-.114-1.251-.478-1.251-1.069,0-.72.591-1.16,1.509-1.16a2.71,2.71,0,0,1,1.478.379Zm3.789-.2h-1.289v1.638c0,.364.129.607.523.607a1.456,1.456,0,0,0,.7-.2l.227.675a1.853,1.853,0,0,1-.986.281c-.933,0-1.259-.5-1.259-1.342V340.3H376.6v-.72h.735v-1.1h.8v1.1h1.289Zm2.729-.811a1.684,1.684,0,0,1,.561.1l-.243.743a1.285,1.285,0,0,0-.493-.091c-.516,0-.773.334-.773.933V343.2h-.788v-3.624h.781v.44a1.069,1.069,0,0,1,.955-.531Zm5.459,3.188a.362.362,0,0,1,.143.028.372.372,0,0,1,.117.077.363.363,0,0,1,.079.115.355.355,0,0,1,0,.28.366.366,0,0,1-.079.114.377.377,0,0,1-.117.078.357.357,0,0,1-.143.029.367.367,0,0,1-.341-.221.355.355,0,0,1,0-.28.366.366,0,0,1,.078-.115.361.361,0,0,1,.117-.077.373.373,0,0,1,.145-.028Zm0,.642a.268.268,0,0,0,.109-.022.286.286,0,0,0,.088-.06.281.281,0,0,0-.088-.457.271.271,0,0,0-.109-.022.283.283,0,0,0-.111.022.276.276,0,0,0-.09.06.281.281,0,0,0,.2.48Zm.021-.45a.152.152,0,0,1,.1.029.1.1,0,0,1,.035.078.091.091,0,0,1-.028.068.133.133,0,0,1-.079.033l.11.126h-.086l-.1-.126h-.033v.126h-.072v-.335Zm-.083.063v.089h.082a.081.081,0,0,0,.045-.011.038.038,0,0,0,.017-.034.037.037,0,0,0-.017-.033.082.082,0,0,0-.045-.011Z"
                        transform="translate(-350.21 -308.994)"
                      />
                      <g id="Groupe_52746" data-name="Groupe 52746">
                        <rect
                          id="Rectangle_18990"
                          data-name="Rectangle 18990"
                          width="11.959"
                          height="21.49"
                          transform="translate(16.133 2.922)"
                          fill="#7375cf"
                        />
                        <path
                          id="Tracé_42222"
                          data-name="Tracé 42222"
                          d="M354.646,274.484a13.643,13.643,0,0,1,5.22-10.745,13.667,13.667,0,1,0,0,21.49A13.643,13.643,0,0,1,354.646,274.484Z"
                          transform="translate(-337.753 -260.816)"
                          fill="#eb001b"
                        />
                        <path
                          id="Tracé_42223"
                          data-name="Tracé 42223"
                          d="M450.362,318.258v-.44h.177v-.09h-.452v.09h.177v.44Zm.877,0v-.53H451.1l-.159.365-.159-.365h-.139v.53h.1v-.4l.149.345h.1l.149-.346v.4Z"
                          transform="translate(-407.441 -296.122)"
                          fill="#00a2e5"
                        />
                        <path
                          id="Tracé_42224"
                          data-name="Tracé 42224"
                          d="M418.112,274.484A13.666,13.666,0,0,1,396,285.229a13.669,13.669,0,0,0,0-21.49,13.666,13.666,0,0,1,22.112,10.745Z"
                          transform="translate(-373.887 -260.817)"
                          fill="#00a2e5"
                        />
                      </g>
                    </g>
                  </svg>
                </li>
                <li class="m-1">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="45.714"
                    height="45.714"
                    viewBox="0 0 45.714 45.714"
                  >
                    <g
                      id="Groupe_52750"
                      data-name="Groupe 52750"
                      transform="translate(-882.667 533.333)"
                    >
                      <path
                        id="Tracé_42229"
                        data-name="Tracé 42229"
                        d="M882.667-533.333h45.714q0,22.857,0,45.714H882.667ZM904.491-511.6c0,.254,0,.471,0,.687,0,.1-.033.143-.132.137-.038,0-.076,0-.114,0H891.784a.715.715,0,0,0-.086,0c-.1.012-.154-.039-.189-.132-.073-.2-.158-.387-.232-.582a.154.154,0,0,0-.169-.116c-.224.005-.447.006-.671,0a.152.152,0,0,0-.168.116c-.064.174-.144.342-.2.518a.252.252,0,0,1-.288.2c-.409-.013-.818,0-1.228-.006-.1,0-.152.032-.14.139a.923.923,0,0,1,0,.1V-493.6a.818.818,0,0,1,0,.086c-.011.106.023.165.142.149a.958.958,0,0,1,.128,0h24.7q4.54,0,9.08,0c.12,0,.176-.017.176-.161q-.006-5.218,0-10.436c0-.039-.006-.078-.011-.132a2.129,2.129,0,0,1-1.228.374q-5.611.007-11.221,0a.34.34,0,0,1-.216-.1c-.116-.119-.212-.256-.318-.385-.082-.1-.165-.2-.269-.323,0,.248,0,.458,0,.667,0,.1-.036.147-.141.146q-1.014,0-2.027,0c-.1,0-.134-.039-.133-.137,0-.338,0-.676,0-1.014v-.269a3.582,3.582,0,0,1-.55.134c-.335.028-.673.029-1.01.032-.108,0-.14.037-.139.141,0,.3,0,.609,0,.914,0,.194,0,.2-.2.2-.942,0-1.885-.013-2.826.008a.636.636,0,0,1-.653-.33,4.435,4.435,0,0,0-.371-.485c-.186.245-.361.47-.53.7a.241.241,0,0,1-.215.109q-2.684,0-5.368,0c-.123,0-.163-.036-.162-.162q.006-2.548,0-5.1c0-.127.036-.159.16-.159q2.7.006,5.4,0a.249.249,0,0,1,.225.115c.165.225.34.444.522.679.168-.217.335-.417.484-.63a.353.353,0,0,1,.33-.165q10.129.006,20.258,0c.212,0,.212,0,.212-.218v-18.016c0-.222,0-.222-.225-.222H888.644a.322.322,0,0,0-.127,0,.215.215,0,0,0-.1.1.384.384,0,0,0,0,.141q0,6.938,0,13.876v.148a.137.137,0,0,0,.058-.07c.377-.882.757-1.763,1.129-2.646a.211.211,0,0,1,.23-.153c.623.007,1.247.008,1.87,0,.154,0,.249.028.292.189a2.553,2.553,0,0,0,.138.328l.446,1.039c.018-.466.023-.927.015-1.388,0-.133.04-.168.17-.167.761.006,1.523,0,2.284,0,.362,0,.361,0,.483.347.093.266.188.531.295.83.125-.36.245-.679.346-1a.217.217,0,0,1,.252-.177q6.017.007,12.035,0c.2,0,.2,0,.2.212,0,.117,0,.235,0,.371.037-.024.057-.035.075-.048a2.647,2.647,0,0,1,1.662-.536q1.9.005,3.8,0a.237.237,0,0,1,.262.172c.189.464.391.924.589,1.385l.02,0v-.051c0-.447,0-.895,0-1.342,0-.127.039-.161.163-.159.576.006,1.153.03,1.727-.007a.662.662,0,0,1,.749.413,3.847,3.847,0,0,0,.306.483l.032-.012v-.875h.155c.676,0,1.352,0,2.027,0,.137,0,.177.038.176.175q-.007,2.534,0,5.068c0,.142-.05.177-.182.176-.647,0-1.294-.007-1.941,0a.338.338,0,0,1-.345-.186c-.139-.245-.3-.477-.475-.748,0,.29,0,.536,0,.783,0,.1-.027.149-.136.148q-1.585,0-3.169,0a.159.159,0,0,1-.167-.122c-.077-.2-.164-.395-.238-.6a.153.153,0,0,0-.17-.113c-.224,0-.447.005-.671,0a.15.15,0,0,0-.166.118c-.072.2-.156.387-.23.583a.174.174,0,0,1-.19.131c-.732-.011-1.465-.011-2.2-.026a2.367,2.367,0,0,1-1.354-.462c-.029-.021-.061-.037-.109-.066,0,.138-.008.257,0,.374.012.139-.043.18-.179.179q-1.585-.006-3.169,0a.289.289,0,0,1-.253-.124C904.884-511.12,904.7-511.341,904.491-511.6Zm-7.191-2.816.048.01v.166c0,.866,0,1.732,0,2.6,0,.133.039.173.171.167.223-.01.447-.009.671,0,.115,0,.145-.036.145-.147q-.005-1.856,0-3.712c0-.12-.037-.155-.154-.154q-.642.008-1.285,0a.188.188,0,0,0-.215.149c-.256.75-.52,1.5-.782,2.245-.017.049-.044.094-.08.171-.031-.08-.05-.122-.065-.166-.265-.752-.531-1.5-.792-2.257a.173.173,0,0,0-.192-.142c-.442.006-.885,0-1.328,0-.1,0-.143.026-.143.136q.005,1.87,0,3.74c0,.11.04.138.142.135.224-.006.448-.009.671,0,.132.006.17-.035.169-.167-.006-.871,0-1.742,0-2.612,0-.052.006-.1.009-.157l.038,0c.02.051.043.1.061.152q.473,1.328.944,2.656a.161.161,0,0,0,.183.132,5.1,5.1,0,0,1,.571,0c.13.008.181-.045.222-.161.3-.869.613-1.736.922-2.6C897.249-514.294,897.276-514.352,897.3-514.411Zm21.384,1.378-.036.011c-.04-.055-.083-.108-.12-.166q-.7-1.09-1.4-2.183a.215.215,0,0,0-.208-.113q-.5.008-1,0c-.108,0-.154.026-.149.144.009.209,0,.418,0,.628,0,1.023,0,2.045,0,3.068,0,.141.043.179.178.173.223-.01.447-.01.67,0,.125.005.163-.033.162-.16-.006-.742,0-1.484,0-2.226,0-.054,0-.108.007-.162a.8.8,0,0,1,.18.21q.711,1.111,1.42,2.223a.211.211,0,0,0,.206.115c.314-.007.628-.006.942,0,.1,0,.133-.03.133-.13q0-1.876,0-3.753c0-.1-.041-.13-.136-.128-.228,0-.457.008-.685,0-.125,0-.163.035-.162.161.006.713,0,1.427,0,2.14Zm-8.351,7.155c.071-.024.114-.041.157-.054a1.253,1.253,0,0,0,.888-1.44,1.236,1.236,0,0,0-1.236-1.05c-.742-.005-1.484,0-2.226,0-.1,0-.143.024-.142.135q.005,1.869,0,3.738c0,.111.041.137.143.135.242-.006.485-.006.727,0,.107,0,.14-.034.138-.139-.005-.376,0-.751,0-1.127,0-.05,0-.1.008-.163a1.643,1.643,0,0,0,.211,0,.335.335,0,0,1,.327.146c.326.4.659.788.992,1.178.037.044.094.1.143.1.379.008.758,0,1.166,0Zm-4.877-7.057.164-.054a1.238,1.238,0,0,0,.886-1.357,1.215,1.215,0,0,0-1.243-1.128c-.732-.013-1.465,0-2.2-.009-.122,0-.153.043-.152.158,0,.552,0,1.1,0,1.655,0,.68,0,1.36,0,2.04,0,.127.039.165.163.16.223-.009.447-.009.67,0,.119,0,.156-.034.154-.153-.007-.385,0-.771,0-1.156a.179.179,0,0,1,.039-.125.5.5,0,0,1,.447.075c.292.345.6.677.869,1.039a.7.7,0,0,0,.7.324,7.442,7.442,0,0,1,.8-.006Zm-6.419-.547c0,.623,0,1.247,0,1.87,0,.088.01.142.121.141q1.513-.005,3.027,0c.087,0,.118-.031.116-.117,0-.2-.009-.4,0-.6.007-.136-.034-.179-.174-.177-.642.007-1.285,0-1.927.007-.15,0-.192-.049-.181-.188a2.521,2.521,0,0,0,0-.357c-.008-.128.036-.173.17-.171.638.007,1.275,0,1.913,0,.1,0,.146-.027.141-.136a5.273,5.273,0,0,1,0-.557c.009-.142-.043-.175-.178-.173-.633.007-1.266,0-1.9.005-.115,0-.154-.038-.148-.147s0-.209,0-.314c0-.221,0-.222.215-.222.638,0,1.275,0,1.913,0,.121,0,.157-.038.152-.155-.008-.185-.01-.372,0-.557.007-.127-.037-.162-.162-.161q-1.47.007-2.941,0c-.138,0-.165.049-.164.174C899.041-514.7,899.038-514.092,899.038-513.483Zm-2.278,8.173c0-.194.008-.369,0-.543-.008-.13.033-.17.166-.168.633.007,1.266,0,1.9,0,.105,0,.144-.031.14-.138-.007-.185-.008-.371,0-.557,0-.112-.031-.151-.145-.149-.3.006-.6,0-.9,0-.338,0-.676,0-1.014,0-.11,0-.154-.036-.146-.15a2.567,2.567,0,0,0,0-.385c-.011-.131.034-.171.167-.17.647.006,1.294,0,1.942.005.119,0,.158-.036.153-.154-.009-.195-.007-.39,0-.585,0-.1-.036-.13-.133-.13q-1.5,0-3,0c-.1,0-.133.028-.133.13q0,1.877,0,3.755c0,.094.034.123.125.122q1.506,0,3.012,0c.091,0,.128-.027.126-.122-.005-.214-.006-.428,0-.642,0-.1-.039-.13-.135-.128-.228.005-.457,0-.685,0Zm16.076,0c0-.191.01-.362,0-.531-.012-.147.039-.183.182-.182.628.008,1.256,0,1.884.005.1,0,.145-.03.14-.138-.007-.166,0-.333,0-.5,0-.2,0-.2-.2-.2-.614,0-1.227,0-1.841,0-.122,0-.173-.033-.163-.162a2.323,2.323,0,0,0,0-.385c-.011-.131.043-.159.164-.158.652,0,1.3,0,1.955,0,.1,0,.148-.023.143-.134-.008-.2-.006-.4,0-.6,0-.1-.024-.135-.128-.135q-1.506,0-3.011,0c-.091,0-.126.027-.125.122q0,1.884,0,3.768c0,.087.031.116.117.116q1.513,0,3.026,0c.1,0,.123-.036.122-.126,0-.209-.006-.419,0-.628,0-.106-.032-.14-.139-.139-.366.005-.733,0-1.1,0Zm-24.418-6.164c.359,0,.7,0,1.031-.005.037,0,.087-.065.106-.111.086-.2.167-.4.243-.608a.143.143,0,0,1,.159-.105q.813,0,1.626,0a.155.155,0,0,1,.168.117c.079.2.159.407.248.606.019.044.073.1.111.1.341.008.682,0,1.034,0a.587.587,0,0,0-.021-.095q-.812-1.9-1.624-3.8a.169.169,0,0,0-.182-.12c-.347.005-.694.007-1.041,0a.193.193,0,0,0-.209.144c-.441,1.039-.888,2.076-1.333,3.114C888.63-511.983,888.529-511.74,888.417-511.474Zm27.2,0c-.015-.049-.022-.081-.035-.11q-.81-1.893-1.619-3.787a.159.159,0,0,0-.172-.112c-.347,0-.695.005-1.042,0a.192.192,0,0,0-.212.138c-.469,1.107-.945,2.211-1.418,3.316-.076.177-.149.356-.234.557.36,0,.7,0,1.032,0,.034,0,.081-.059.1-.1.087-.2.169-.4.245-.608a.151.151,0,0,1,.166-.117q.814.006,1.627,0a.146.146,0,0,1,.159.107c.081.208.164.415.254.62.018.041.065.1.1.1C914.914-511.471,915.26-511.474,915.619-511.474Zm7.03,3.049h-.172c-.652,0-1.3,0-1.955,0a2.164,2.164,0,0,0-.354.03,1.249,1.249,0,0,0-.778,1.965,1.186,1.186,0,0,0,.979.435c.328.011.656,0,.984,0a.343.343,0,0,1,.386.345c0,.21-.144.335-.388.336-.633,0-1.265,0-1.9,0-.125,0-.181.024-.173.164a5.561,5.561,0,0,1,0,.585c0,.114.034.147.146.146.528-.005,1.056,0,1.584,0,.185,0,.37-.01.554-.022a1.219,1.219,0,0,0,1.165-1.191,1.078,1.078,0,0,0-1.088-1.218c-.347-.005-.694,0-1.042-.007a.756.756,0,0,1-.224-.032.331.331,0,0,1-.2-.425.356.356,0,0,1,.378-.241c.528,0,1.056,0,1.584,0,.052,0,.134-.025.152-.063C922.411-507.88,922.522-508.141,922.649-508.425Zm-3.7,0h-.162c-.671,0-1.341-.006-2.012,0a1.739,1.739,0,0,0-.515.087,1.246,1.246,0,0,0-.445,2.043,1.294,1.294,0,0,0,.856.3c.337.01.675,0,1.013,0a.342.342,0,0,1,.339.456.331.331,0,0,1-.344.223c-.647,0-1.294,0-1.94,0-.114,0-.154.034-.147.146s0,.247,0,.371c0,.375,0,.378.371.374.641-.006,1.285.016,1.923-.031a1.247,1.247,0,0,0,1.044-1.789,1,1,0,0,0-.954-.608c-.37-.022-.742-.006-1.113-.011-.235,0-.385-.119-.4-.3a.343.343,0,0,1,.386-.4c.528,0,1.056,0,1.584,0,.051,0,.13-.016.147-.049C918.706-507.869,918.82-508.134,918.95-508.425Zm-14.281,2.69c.407,0,.792,0,1.176,0a2.237,2.237,0,0,0,.4-.039,1.289,1.289,0,0,0,1.062-1.418,1.255,1.255,0,0,0-1.246-1.23c-.751-.006-1.5,0-2.254,0-.1,0-.14.03-.14.138q0,1.868,0,3.737c0,.1.027.136.129.133.238-.006.476-.01.713,0,.136.006.169-.041.166-.17C904.664-504.962,904.669-505.337,904.669-505.734Zm-5.514-2.689c.037.051.052.074.069.1.466.583.929,1.168,1.4,1.745a.211.211,0,0,1,0,.323c-.473.577-.936,1.162-1.4,1.745a.9.9,0,0,0-.056.094c.367,0,.713,0,1.06,0a.245.245,0,0,0,.223-.116c.255-.344.516-.683.775-1.023.03-.039.066-.072.108-.116.255.333.516.637.734.97a.581.581,0,0,0,.6.287c.277-.022.556,0,.863,0-.046-.062-.072-.1-.1-.135-.474-.6-.946-1.191-1.424-1.783a.144.144,0,0,1,0-.218c.341-.415.677-.834,1.014-1.253.156-.194.311-.39.483-.606-.075,0-.12-.008-.166-.008-.295,0-.59,0-.885,0a.257.257,0,0,0-.249.124c-.07.107-.154.205-.232.307l-.619.8c-.041-.046-.074-.079-.1-.115-.258-.335-.514-.672-.775-1.005-.035-.045-.092-.1-.14-.1C899.954-508.427,899.57-508.424,899.155-508.424Zm11.668-3.94c-.171,0-.307,0-.444,0a.873.873,0,0,1-.819-.6,1.925,1.925,0,0,1-.084-.615.961.961,0,0,1,1.063-1c.295,0,.59,0,.884,0,.1,0,.138-.026.135-.129q-.008-.321,0-.642c0-.1-.041-.13-.136-.129-.418,0-.839-.019-1.255.013a1.683,1.683,0,0,0-1.463.939,2.5,2.5,0,0,0-.206,1.39,1.868,1.868,0,0,0,.4,1.036,1.824,1.824,0,0,0,1.438.629.129.129,0,0,0,.1-.055C910.562-511.8,910.683-512.063,910.823-512.364Zm-2.869-1.11c0-.622,0-1.245,0-1.868,0-.1-.029-.144-.137-.142-.237.006-.475,0-.713,0-.1,0-.136.027-.136.129q0,1.875,0,3.749c0,.1.029.135.131.133.233-.006.466-.009.7,0,.131.006.158-.044.157-.165C907.951-512.248,907.954-512.861,907.954-513.474Z"
                        fill="#fff"
                      />
                      <path
                        id="Tracé_42230"
                        data-name="Tracé 42230"
                        d="M1099.657-316.428c.207.254.393.475.57.7a.29.29,0,0,0,.253.124q1.585-.005,3.169,0c.136,0,.19-.041.179-.179-.01-.117,0-.236,0-.374.048.029.08.045.109.066a2.367,2.367,0,0,0,1.354.462c.732.015,1.464.015,2.2.026a.174.174,0,0,0,.19-.131c.073-.2.158-.387.23-.583a.15.15,0,0,1,.166-.118c.224.006.447,0,.671,0a.153.153,0,0,1,.17.113c.074.2.162.4.239.6a.159.159,0,0,0,.167.122q1.585,0,3.169,0c.109,0,.138-.048.136-.148,0-.247,0-.493,0-.783.174.271.336.5.475.748a.338.338,0,0,0,.345.186c.647-.008,1.294-.006,1.942,0,.132,0,.183-.034.182-.176q-.007-2.534,0-5.068c0-.138-.039-.177-.176-.175-.676.007-1.351,0-2.027,0h-.155v.875l-.032.012a3.833,3.833,0,0,1-.306-.483.662.662,0,0,0-.749-.413c-.573.037-1.151.013-1.727.007-.124,0-.165.032-.163.159.007.447,0,.895,0,1.342v.051l-.02,0c-.2-.461-.4-.92-.589-1.385a.237.237,0,0,0-.262-.172q-1.9.009-3.8,0a2.647,2.647,0,0,0-1.661.536c-.018.013-.037.024-.075.048,0-.137,0-.254,0-.371,0-.212,0-.212-.2-.212q-6.017,0-12.035,0a.218.218,0,0,0-.252.177c-.1.325-.221.644-.346,1-.107-.3-.2-.565-.295-.83-.121-.347-.12-.347-.483-.347-.761,0-1.523,0-2.284,0-.13,0-.172.034-.17.167.007.461,0,.922-.015,1.388l-.446-1.039a2.556,2.556,0,0,1-.138-.328c-.043-.16-.138-.191-.292-.189-.623.009-1.247.008-1.87,0a.211.211,0,0,0-.23.153c-.373.884-.752,1.765-1.129,2.646a.138.138,0,0,1-.058.07v-14.025a.382.382,0,0,1,0-.141.216.216,0,0,1,.1-.1.323.323,0,0,1,.127,0h33.763c.225,0,.225,0,.225.222q0,9.008,0,18.017c0,.218,0,.218-.212.218q-10.129,0-20.258,0a.354.354,0,0,0-.33.165c-.149.213-.316.413-.484.63-.182-.235-.357-.454-.522-.679a.249.249,0,0,0-.225-.114q-2.7,0-5.4,0c-.125,0-.161.032-.16.159q.006,2.548,0,5.1c0,.127.04.163.162.162q2.684,0,5.368,0a.241.241,0,0,0,.215-.109c.169-.23.344-.455.53-.7a4.413,4.413,0,0,1,.371.485.636.636,0,0,0,.653.33c.942-.021,1.884-.008,2.827-.008.2,0,.2,0,.2-.2,0-.3,0-.609,0-.914,0-.1.031-.14.139-.141.337,0,.675,0,1.01-.032a3.592,3.592,0,0,0,.55-.134v.269c0,.338,0,.676,0,1.014,0,.1.035.137.133.137q1.014,0,2.027,0c.105,0,.143-.045.142-.146,0-.209,0-.418,0-.667.1.125.188.223.269.323.105.129.2.266.318.385a.34.34,0,0,0,.216.1q5.611.007,11.221,0a2.129,2.129,0,0,0,1.228-.374c0,.054.011.093.011.132q0,5.218,0,10.436c0,.143-.055.161-.176.161q-4.54,0-9.08,0h-24.7a.958.958,0,0,0-.128,0c-.119.016-.153-.043-.142-.149a.834.834,0,0,0,0-.086v-16.931a.94.94,0,0,0,0-.1c-.012-.107.036-.14.14-.139.409,0,.819-.007,1.228.006a.252.252,0,0,0,.288-.2c.058-.176.138-.344.2-.518a.152.152,0,0,1,.168-.116c.224.006.447.006.671,0a.154.154,0,0,1,.169.116c.074.2.158.387.231.582.035.093.086.144.189.132a.723.723,0,0,1,.086,0h12.463c.038,0,.076,0,.114,0,.1.006.134-.041.132-.137C1099.654-315.957,1099.657-316.174,1099.657-316.428Z"
                        transform="translate(-195.166 -195.167)"
                        fill="#006fcf"
                      />
                      <path
                        id="Tracé_42231"
                        data-name="Tracé 42231"
                        d="M1258.789,92.454c-.025.059-.052.117-.073.177-.309.867-.618,1.734-.922,2.6-.04.116-.092.169-.222.161a5.111,5.111,0,0,0-.571,0,.161.161,0,0,1-.183-.132q-.468-1.329-.944-2.656c-.018-.051-.04-.1-.061-.152l-.038,0c0,.052-.009.1-.009.157,0,.871,0,1.742,0,2.612,0,.133-.037.174-.169.167-.223-.01-.447-.007-.671,0-.1,0-.143-.025-.142-.135q0-1.87,0-3.74c0-.111.041-.137.142-.136.442,0,.885.005,1.328,0a.173.173,0,0,1,.192.142c.261.753.527,1.5.792,2.257.016.044.034.087.065.166.036-.077.063-.122.08-.171.262-.748.526-1.5.782-2.245a.188.188,0,0,1,.215-.149q.642.01,1.285,0c.117,0,.155.034.154.154q-.006,1.856,0,3.712c0,.112-.03.152-.145.147-.223-.008-.448-.01-.671,0-.131.006-.172-.035-.171-.167.005-.866,0-1.732,0-2.6v-.166Z"
                        transform="translate(-361.488 -606.865)"
                        fill="#006fcf"
                      />
                      <path
                        id="Tracé_42232"
                        data-name="Tracé 42232"
                        d="M2044.148,93.824v-.149c0-.713,0-1.427,0-2.14,0-.127.037-.166.162-.161.228.009.457.005.685,0,.094,0,.136.025.136.128q0,1.876,0,3.753c0,.1-.034.132-.133.13-.314,0-.628-.006-.942,0a.211.211,0,0,1-.206-.115q-.707-1.113-1.42-2.223a.8.8,0,0,0-.18-.21c0,.054-.007.108-.007.162,0,.742,0,1.484,0,2.226,0,.127-.037.165-.162.16-.223-.009-.447-.01-.67,0-.135.006-.179-.032-.178-.173.006-1.023,0-2.045,0-3.068,0-.209.006-.419,0-.628-.005-.118.042-.146.149-.144q.5.007,1,0a.215.215,0,0,1,.208.113q.7,1.094,1.4,2.183c.037.057.08.11.12.166Z"
                        transform="translate(-1125.464 -606.857)"
                        fill="#006fcf"
                      />
                      <path
                        id="Tracé_42233"
                        data-name="Tracé 42233"
                        d="M1764,340.957l1.295,1.458c-.408,0-.787,0-1.166,0-.049,0-.106-.056-.143-.1-.333-.39-.666-.782-.992-1.178a.335.335,0,0,0-.327-.146,1.654,1.654,0,0,1-.211,0c0,.063-.007.113-.007.163,0,.376,0,.751,0,1.127,0,.106-.031.142-.138.139-.242-.007-.485-.006-.728,0-.1,0-.143-.024-.143-.135q.005-1.869,0-3.738c0-.111.041-.135.143-.135.742,0,1.484,0,2.226,0a1.236,1.236,0,0,1,1.235,1.05,1.253,1.253,0,0,1-.887,1.44C1764.118,340.916,1764.076,340.933,1764,340.957Zm-1.552-.83c.4,0,.781,0,1.16,0a.422.422,0,0,0,.457-.408.437.437,0,0,0-.436-.437c-.361-.011-.722-.005-1.083,0a.13.13,0,0,0-.094.085C1762.449,339.613,1762.453,339.859,1762.453,340.127Z"
                        transform="translate(-853.671 -846.836)"
                        fill="#006fcf"
                      />
                      <path
                        id="Tracé_42234"
                        data-name="Tracé 42234"
                        d="M1593.87,93.942l1.3,1.463a7.443,7.443,0,0,0-.8.006.7.7,0,0,1-.7-.324c-.269-.362-.577-.694-.869-1.039a.5.5,0,0,0-.447-.075.179.179,0,0,0-.039.125c0,.385-.006.771,0,1.156,0,.119-.035.158-.154.153-.223-.008-.447-.009-.671,0-.125.005-.164-.033-.163-.16.005-.68,0-1.36,0-2.04,0-.552,0-1.1,0-1.655,0-.115.031-.159.152-.158.732.006,1.465,0,2.2.009a1.215,1.215,0,0,1,1.243,1.128,1.238,1.238,0,0,1-.886,1.357Zm-.9-.826c.171,0,.342,0,.513,0a.424.424,0,0,0,.453-.411.433.433,0,0,0-.447-.437c-.351-.006-.7,0-1.054,0-.1,0-.123.037-.121.126q.006.306,0,.612c0,.086.027.118.115.116C1592.606,93.113,1592.787,93.116,1592.967,93.116Z"
                        transform="translate(-688.413 -606.878)"
                        fill="#006fcf"
                      />
                      <path
                        id="Tracé_42235"
                        data-name="Tracé 42235"
                        d="M1455.572,93.369c0-.609,0-1.218,0-1.827,0-.125.026-.175.164-.174q1.471.008,2.941,0c.124,0,.168.034.162.161-.01.185-.009.371,0,.557.005.117-.031.156-.152.155-.638-.005-1.275,0-1.913,0-.215,0-.215,0-.215.222,0,.1,0,.21,0,.314s.033.148.148.147c.633-.005,1.266,0,1.9-.005.135,0,.187.031.178.173a5.224,5.224,0,0,0,0,.557c0,.11-.038.137-.141.136-.638,0-1.275,0-1.913,0-.134,0-.178.043-.17.171a2.521,2.521,0,0,1,0,.357c-.01.139.031.19.181.188.642-.009,1.285,0,1.927-.007.14,0,.181.041.174.177-.011.2-.006.4,0,.6,0,.086-.029.117-.116.117q-1.513,0-3.027,0c-.112,0-.121-.054-.121-.141C1455.573,94.616,1455.572,93.993,1455.572,93.369Z"
                        transform="translate(-556.534 -606.852)"
                        fill="#006fcf"
                      />
                      <path
                        id="Tracé_42236"
                        data-name="Tracé 42236"
                        d="M1341.726,341.532h1.438c.228,0,.457,0,.685,0,.1,0,.138.024.135.128-.006.214-.005.428,0,.642,0,.1-.035.122-.126.122q-1.506,0-3.012,0c-.092,0-.125-.028-.125-.122q0-1.877,0-3.755c0-.1.036-.13.133-.13q1.5,0,3,0c.1,0,.137.028.133.13-.006.195-.008.39,0,.585.005.118-.034.155-.153.154-.647-.005-1.294,0-1.942-.005-.132,0-.177.039-.167.17a2.567,2.567,0,0,1,0,.385c-.008.114.035.151.146.15.338,0,.676,0,1.014,0,.3,0,.6,0,.9,0,.114,0,.15.037.145.149-.008.185-.007.371,0,.557,0,.108-.034.139-.14.138-.633,0-1.266,0-1.9,0-.133,0-.173.038-.166.169C1341.734,341.163,1341.726,341.338,1341.726,341.532Z"
                        transform="translate(-444.966 -846.842)"
                        fill="#006fcf"
                      />
                      <path
                        id="Tracé_42237"
                        data-name="Tracé 42237"
                        d="M1904.407,341.524h1.022c.366,0,.733,0,1.1,0,.106,0,.142.033.139.139-.006.209,0,.419,0,.628,0,.09-.026.127-.122.126q-1.513,0-3.026,0c-.086,0-.117-.029-.117-.116q0-1.884,0-3.768c0-.1.034-.123.125-.122q1.505,0,3.011,0c.1,0,.13.04.128.135-.005.2-.007.4,0,.6,0,.112-.043.135-.143.134-.652,0-1.3,0-1.955,0-.121,0-.175.027-.164.158a2.329,2.329,0,0,1,0,.385c-.01.129.041.163.163.162.614,0,1.227,0,1.841,0,.2,0,.2,0,.2.2,0,.167-.005.333,0,.5,0,.108-.035.138-.14.138-.628,0-1.256,0-1.884-.005-.143,0-.194.034-.182.182C1904.417,341.163,1904.407,341.334,1904.407,341.524Z"
                        transform="translate(-991.571 -846.834)"
                        fill="#006fcf"
                      />
                      <path
                        id="Tracé_42238"
                        data-name="Tracé 42238"
                        d="M1083.929,95.385c.112-.266.213-.509.317-.752.445-1.038.891-2.075,1.333-3.114a.193.193,0,0,1,.209-.144c.347.008.694.006,1.041,0a.169.169,0,0,1,.182.12q.81,1.9,1.624,3.8a.6.6,0,0,1,.021.095c-.352,0-.694,0-1.035,0-.039,0-.092-.059-.111-.1-.088-.2-.169-.4-.248-.606a.155.155,0,0,0-.168-.117q-.813.007-1.626,0a.143.143,0,0,0-.159.105c-.076.2-.156.407-.243.608-.02.045-.069.11-.107.111C1084.624,95.388,1084.288,95.385,1083.929,95.385Zm2.376-3.062h-.045l-.548,1.361h1.145Z"
                        transform="translate(-195.512 -606.859)"
                        fill="#006fcf"
                      />
                      <path
                        id="Tracé_42239"
                        data-name="Tracé 42239"
                        d="M1875.106,95.4c-.36,0-.705,0-1.05,0-.035,0-.082-.057-.1-.1-.089-.2-.173-.411-.254-.619a.146.146,0,0,0-.159-.107q-.814.006-1.627,0a.151.151,0,0,0-.166.117c-.076.2-.158.407-.245.608-.018.041-.064.1-.1.1-.336.008-.672,0-1.032,0,.084-.2.157-.379.233-.557.474-1.1.949-2.209,1.418-3.316a.193.193,0,0,1,.212-.138c.347.006.695,0,1.042,0a.159.159,0,0,1,.172.112q.807,1.894,1.619,3.787C1875.084,95.318,1875.091,95.35,1875.106,95.4Zm-2.357-3.064-.045,0-.548,1.36h1.144Z"
                        transform="translate(-959.487 -606.873)"
                        fill="#006fcf"
                      />
                      <path
                        id="Tracé_42240"
                        data-name="Tracé 42240"
                        d="M2162.98,338.456c-.127.284-.238.545-.362.8-.019.038-.1.063-.152.063-.528,0-1.056,0-1.584,0a.356.356,0,0,0-.378.241.33.33,0,0,0,.2.425.756.756,0,0,0,.224.032c.347,0,.694,0,1.042.007a1.078,1.078,0,0,1,1.088,1.218,1.218,1.218,0,0,1-1.165,1.191c-.184.012-.369.021-.554.022-.528,0-1.056,0-1.584,0-.113,0-.151-.032-.146-.146a5.432,5.432,0,0,0,0-.585c-.009-.14.048-.165.173-.164.633.005,1.265,0,1.9,0,.244,0,.388-.125.388-.336a.343.343,0,0,0-.386-.345c-.328,0-.656.008-.984,0a1.185,1.185,0,0,1-.979-.435,1.249,1.249,0,0,1,.778-1.965,2.166,2.166,0,0,1,.354-.03c.652,0,1.3,0,1.955,0Z"
                        transform="translate(-1240.331 -846.881)"
                        fill="#006fcf"
                      />
                      <path
                        id="Tracé_42241"
                        data-name="Tracé 42241"
                        d="M2033.877,338.411c-.13.291-.244.555-.37.814-.016.033-.1.049-.146.049-.528,0-1.056,0-1.584,0a.343.343,0,0,0-.386.4c.018.182.168.3.4.3.371,0,.743-.011,1.113.011a1,1,0,0,1,.954.608,1.247,1.247,0,0,1-1.044,1.788c-.638.048-1.282.025-1.923.031-.371,0-.371,0-.371-.374,0-.124.006-.248,0-.371s.034-.147.147-.146c.647,0,1.294,0,1.94,0a.331.331,0,0,0,.344-.223.342.342,0,0,0-.339-.456c-.338,0-.676.006-1.013,0a1.294,1.294,0,0,1-.856-.3,1.246,1.246,0,0,1,.445-2.043,1.739,1.739,0,0,1,.515-.087c.67-.01,1.341,0,2.012,0Z"
                        transform="translate(-1114.927 -846.836)"
                        fill="#006fcf"
                      />
                      <path
                        id="Tracé_42242"
                        data-name="Tracé 42242"
                        d="M1618.545,341.1c0,.4-.005.772,0,1.146,0,.129-.03.176-.166.17-.237-.011-.475-.007-.713,0-.1,0-.13-.036-.129-.133q0-1.868,0-3.737c0-.107.035-.138.14-.138.751,0,1.5,0,2.254,0a1.255,1.255,0,0,1,1.246,1.23,1.289,1.289,0,0,1-1.062,1.418,2.241,2.241,0,0,1-.4.039C1619.337,341.1,1618.952,341.1,1618.545,341.1Zm0-.889c.4,0,.787,0,1.172,0a.443.443,0,0,0,.472-.446.458.458,0,0,0-.454-.486c-.361-.01-.723-.005-1.085,0a.14.14,0,0,0-.1.093C1618.542,339.641,1618.546,339.911,1618.546,340.208Z"
                        transform="translate(-713.876 -846.831)"
                        fill="#006fcf"
                      />
                      <path
                        id="Tracé_42243"
                        data-name="Tracé 42243"
                        d="M1459.754,338.376c.415,0,.8,0,1.183,0,.048,0,.1.059.14.1.26.333.517.67.775,1.005.028.036.061.069.1.115l.619-.8c.078-.1.162-.2.232-.307a.256.256,0,0,1,.249-.124c.295.008.59,0,.885,0,.045,0,.091,0,.166.008-.172.216-.326.412-.483.606-.337.418-.673.837-1.014,1.253a.144.144,0,0,0,0,.218c.477.592.95,1.188,1.424,1.783.028.036.055.073.1.135-.307,0-.587-.017-.863,0a.581.581,0,0,1-.6-.287c-.218-.333-.479-.637-.734-.97-.041.044-.078.077-.108.116-.26.34-.521.679-.775,1.023a.245.245,0,0,1-.223.116c-.346-.006-.693,0-1.06,0a.915.915,0,0,1,.056-.094c.466-.583.929-1.168,1.4-1.745a.21.21,0,0,0,0-.323c-.473-.577-.936-1.163-1.4-1.745C1459.806,338.45,1459.791,338.426,1459.754,338.376Z"
                        transform="translate(-560.599 -846.799)"
                        fill="#006fcf"
                      />
                      <path
                        id="Tracé_42244"
                        data-name="Tracé 42244"
                        d="M1788.558,94.41c-.139.3-.261.568-.389.832a.129.129,0,0,1-.1.055,1.824,1.824,0,0,1-1.438-.629,1.866,1.866,0,0,1-.4-1.036,2.494,2.494,0,0,1,.206-1.39,1.683,1.683,0,0,1,1.463-.939c.416-.032.836-.008,1.255-.013.095,0,.139.027.136.129q-.008.321,0,.642c0,.1-.039.13-.135.129-.295,0-.589,0-.884,0a.961.961,0,0,0-1.063,1,1.926,1.926,0,0,0,.084.615.873.873,0,0,0,.819.6C1788.251,94.413,1788.387,94.41,1788.558,94.41Z"
                        transform="translate(-877.735 -606.774)"
                        fill="#006fcf"
                      />
                      <path
                        id="Tracé_42245"
                        data-name="Tracé 42245"
                        d="M1734.267,93.415c0,.613,0,1.226,0,1.839,0,.12-.025.17-.157.165-.232-.01-.466-.007-.7,0-.1,0-.131-.036-.131-.133q0-1.875,0-3.749c0-.1.041-.131.136-.129.238,0,.475.006.713,0,.108,0,.138.038.137.142C1734.265,92.17,1734.267,92.792,1734.267,93.415Z"
                        transform="translate(-826.313 -606.889)"
                        fill="#006fcf"
                      />
                      <path
                        id="Tracé_42246"
                        data-name="Tracé 42246"
                        d="M1796.667,369.524c0-.268,0-.514,0-.76a.13.13,0,0,1,.094-.085c.361-.006.722-.012,1.083,0a.438.438,0,0,1,.436.437.422.422,0,0,1-.457.408C1797.447,369.526,1797.068,369.524,1796.667,369.524Z"
                        transform="translate(-887.885 -876.234)"
                        fill="#fff"
                      />
                      <path
                        id="Tracé_42247"
                        data-name="Tracé 42247"
                        d="M1626.412,122.66c-.18,0-.361,0-.541,0-.087,0-.116-.03-.115-.116q.007-.306,0-.612c0-.09.026-.127.121-.126.351,0,.7,0,1.054,0a.433.433,0,0,1,.447.437.424.424,0,0,1-.453.411C1626.754,122.662,1626.583,122.66,1626.412,122.66Z"
                        transform="translate(-721.858 -636.422)"
                        fill="#fff"
                      />
                      <path
                        id="Tracé_42248"
                        data-name="Tracé 42248"
                        d="M1146.908,124.55l.552,1.362h-1.145l.548-1.361Z"
                        transform="translate(-256.115 -639.086)"
                        fill="#fff"
                      />
                      <path
                        id="Tracé_42249"
                        data-name="Tracé 42249"
                        d="M1933.362,124.5l.551,1.363h-1.144l.548-1.36Z"
                        transform="translate(-1020.099 -639.041)"
                        fill="#fff"
                      />
                      <path
                        id="Tracé_42250"
                        data-name="Tracé 42250"
                        d="M1652.749,369.609c0-.3,0-.567,0-.838a.14.14,0,0,1,.1-.093c.361-.007.723-.012,1.085,0a.458.458,0,0,1,.454.486.443.443,0,0,1-.472.446C1653.536,369.61,1653.152,369.609,1652.749,369.609Z"
                        transform="translate(-748.079 -876.233)"
                        fill="#fff"
                      />
                    </g>
                  </svg>
                </li>
              </ul>
            </div>
            <div
              class="md-layout-item dashboard-border right overflow-hidden p-0"
            >
              <div class="titre-resume bloc-content pb-0">
                {{ $t("commandSummary") }}
              </div>
              <form action="" class="bloc-content">
                <div class="d-flex flex-column mb-2">
                  <span class="pseudo-label"> {{ $t("subscription") }}:</span>
                  <div class="remind-bloc">
                    <div class="labeled">
                      <span class="number">x1</span> {{ $t("offer") }}
                      {{ subscription.name }}
                    </div>
                    <div class="price">
                      {{ pointToComma(ogPrice.toFixed(2)) }}&nbsp;€
                    </div>
                  </div>
                  <div class="remind-bloc">
                    <div class="labeled">
                      {{ $t("prorataDeduction") }}
                    </div>
                    <div class="price">
                      -{{ pointToComma(prorata.toFixed(2)) }}&nbsp;€
                    </div>
                  </div>
                </div>
                <div class="d-flex flex-column mb-2">
                  <span class="pseudo-label">{{ $t("details") }} :</span>
                  <div class="remind-bloc detail d-block">
                    <div class="d-flex flex-nowrap mb-2">
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        width="43"
                        height="43"
                        viewBox="0 0 70.5 70.5"
                      >
                        <g
                          id="Groupe_53081"
                          data-name="Groupe 53081"
                          transform="translate(-85 -147.981)"
                        >
                          <g
                            id="Oval"
                            transform="translate(85 147.981)"
                            fill="transparent"
                            stroke="#5c626a"
                            stroke-miterlimit="10"
                            stroke-width="2"
                          >
                            <circle
                              cx="35.25"
                              cy="35.25"
                              r="35.25"
                              stroke="none"
                            />
                            <circle
                              cx="35.25"
                              cy="35.25"
                              r="34.25"
                              fill="none"
                            />
                          </g>
                          <path
                            id="crown"
                            d="M41.8,27.993a4.242,4.242,0,1,0-8.484,0,3.984,3.984,0,0,0,.509,1.994l-4.5,3.436-4.454-5.854a4.237,4.237,0,1,0-7.3-2.927,4.161,4.161,0,0,0,1.1,2.842l-4.793,5.938L9.732,30.071a4.341,4.341,0,0,0,.551-2.078A4.242,4.242,0,1,0,5.7,32.235l1.612,8.441v4.411A1.25,1.25,0,0,0,8.587,46.36H34.971a1.25,1.25,0,0,0,1.273-1.273V40.676l1.612-8.441A4.286,4.286,0,0,0,41.8,27.993Zm-4.242-1.7a1.7,1.7,0,1,1-1.7,1.7A1.7,1.7,0,0,1,37.558,26.3ZM21.821,22.945a1.7,1.7,0,1,1-1.7,1.7A1.7,1.7,0,0,1,21.821,22.945ZM14.1,36.519h.127a1.311,1.311,0,0,0,.848-.467L20.888,28.8a6.328,6.328,0,0,0,.891.085,5.2,5.2,0,0,0,.806-.085l5.429,7.211a1.366,1.366,0,0,0,.848.509h.17a1.184,1.184,0,0,0,.764-.255l5.514-4.242-1.4,7.253H9.69L8.332,32.192l5.005,4.072A1.107,1.107,0,0,0,14.1,36.519ZM4.387,27.993a1.7,1.7,0,1,1,1.7,1.7A1.7,1.7,0,0,1,4.387,27.993ZM9.9,43.815V41.821H33.741v1.994Z"
                            transform="translate(99.2 149.582)"
                            fill="#5c626a"
                          />
                        </g>
                      </svg>
                      <div class="d-flex flex-column ml-2">
                        <span>{{ $t("offer") }}</span>
                        <span class="title-details">{{
                          subscription.name
                        }}</span>
                      </div>
                    </div>
                    <div class="item-detail d-flex align-items-center">
                      <span class="mr-1" v-html="iconCheck"></span>
                      <span class="number mr-1">{{
                        subscription.number_couple_offered != 0
                          ? subscription.number_couple_offered
                          : $t("all")
                      }}</span>
                      {{
                        subscription.number_couple_offered != 0
                          ? $t("pairChoice")
                          : $t("pairs")
                      }}
                    </div>
                    <div class="item-detail d-flex align-items-center">
                      <span class="mr-1" v-html="iconCheck"></span>
                      {{
                        withReduction
                          ? $t("withEngagement")
                          : $t("noEngagement")
                      }}
                    </div>
                  </div>
                </div>
                <div class="form-group code-promotion-group">
                  <div class="d-flex align-items-center code-promotion-content">
                    <md-field class="">
                      <label>{{ $t("promotionCode") }} </label>
                      <md-input v-model="setCodePromotion"></md-input>
                    </md-field>
                    <md-button
                      type="submit"
                      :disabled="buttonCodePromo"
                      class="submit-dialog text-center btn-submit text-center w-100 text-normal m-0 h-auto"
                      @click="getReduction($event)"
                    >
                      <span class="text-button">{{ $t("apply") }}</span>
                    </md-button>
                  </div>
                </div>
                <span
                  class="error"
                  v-for="error in errorCodePromo"
                  :key="error"
                  >{{ error }}</span
                >
                <p class="mb-3">
                  {{ $t("reductionOf") }}
                  <span class="number">{{ promotion }}%</span>
                  {{ $t("applied") }}
                </p>

                <div class="d-flex flex-column mb-2">
                  <span class="pseudo-label"> {{ $t("storedCredits") }} :</span>
                  <p>
                    {{ $t("alertCreditAvailable") }}
                  </p>
                  <div class="credit-fields row no-gutters align-items-center">
                    <div class="col-sm-2 col-xl-3">
                      <p class="details">
                        <svg
                          xmlns="http://www.w3.org/2000/svg"
                          width="50.526"
                          height="48"
                          viewBox="0 0 50.526 48"
                        >
                          <path
                            id="Tracé_42201"
                            data-name="Tracé 42201"
                            d="M47.044,15.895,41.309,10.16a13.524,13.524,0,0,1,.808-2.905,3.538,3.538,0,0,0,.3-1.465A3.784,3.784,0,0,0,38.632,2,12.619,12.619,0,0,0,28.526,7.053H15.895A13.887,13.887,0,0,0,2,20.947C2,28.627,8.316,50,8.316,50H22.211V44.947h5.053V50H41.158L45.4,35.878,52.526,33.5V15.895ZM29.789,19.684H17.158V14.632H29.789Zm7.579,5.053a2.526,2.526,0,1,1,2.526-2.526A2.534,2.534,0,0,1,37.368,24.737Z"
                            transform="translate(-2 -2)"
                            fill="#5c626a"
                          />
                        </svg>
                        <span class="text">
                          {{ pointToComma(creditClient) }} €
                        </span>
                      </p>
                    </div>

                    <div class="form-group col-sm-10 col-xl-9 mb-0">
                      <span class="error">{{ errorCreditValue }}</span>
                      <md-field :md-counter="false">
                        <label>{{ $t("credits") }}</label>
                        <md-input
                          v-model="credit"
                          :maxlength="10"
                          :class="errorCreditValue && 'error-input'"
                          type="number"
                          @keypress="numericOnly"
                        ></md-input>
                        <span class="md-suffix position-absolute">€</span>
                      </md-field>
                    </div>
                  </div>
                </div>
              </form>

              <div class="bloc-noir bloc-content">
                <div class="item">
                  <span class="pseudo-label">{{ $t("credits") }}</span>
                  <span
                    >-
                    {{
                      credit === ""
                        ? pointToComma(parseFloat(0).toFixed(2))
                        : pointToComma(parseFloat(credit).toFixed(2))
                    }}&nbsp;€</span
                  >
                </div>
                <div class="item">
                  <span class="pseudo-label">{{ $t("promotionCode") }} :</span>
                  <span
                    >- {{ pointToComma(codePromotion.toFixed(2)) }}&nbsp;€</span
                  >
                </div>
                <div class="item total mb-0 pt-2">
                  <span class="pseudo-label">{{ $t("orderTotal") }} :</span>
                  <span>{{ pointToComma(inputTotal.toFixed(2)) }}&nbsp;€</span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </PermanentFull>
    <Dialog
      :showDialog="showDialog"
      :titreDialog="$t('congrats')"
      :iconDialog="iconDialog"
    >
      <p class="text-center" style="max-width: 400px">
        {{ $t("alertSubscriptionMade") }}.
      </p>

      <div class="w-100 text-center">
        <router-link to="/dashboard" class="back mb-3 align-self-start">
          <md-button
            type="submit"
            class="submit-dialog text-center btn-submit w-100"
            @click="showDialog = false"
          >
            {{ $t("continue") }}
          </md-button></router-link
        >
      </div>
    </Dialog>
    <Dialog
      :showDialog="showDialogError"
      :titreDialog="$t('error')"
      :iconDialog="iconDialog"
    >
      <div class="w-100 text-center">
        {{ errorDowngrade }}<br />
        <md-button
          type="submit"
          class="submit-dialog text-center btn-submit w-100"
          @click="showDialogError = false"
        >
          {{ $t("ok") }}
        </md-button>
      </div>
    </Dialog>
    <Dialog
      :btnClose="false"
      :showDialog="showDialogListeCouples"
      :dialogName="$t('keep:message')"
      :iconDialog="iconDialog"
      @close="showDialogListeCouples = false"
    >
      <span class="error">{{ errorToMuchCouple }}</span>
      <div
        class="text-center pt-4"
        style="width: 312px;"
        v-for="(item, index) in listUserCouple"
        :key="index"
      >
        <div class="d-flex align-items-center justify-content-between mb-2">
          <div
            class="crypto-item-title d-flex flex-column align-items-start justify-content-center"
          >
            {{ item.fullName }}
            <span class="crypto-sigle text-uppercase text-left">{{
              item.symbol
            }}</span>
          </div>
          <md-checkbox
            class="mr-0 ml-1"
            v-model="arraySymbol"
            :value="item.id"
          ></md-checkbox>
        </div>
      </div>
      <div class="form-group text-center mt-4">
        <md-button
          class="submit-dialog text-center btn-submit text-center w-100 px-0 mx-0"
          @click="keepCouple()"
          :disabled="disableButton"
        >
          {{ $t("keep") }}
        </md-button>
      </div>
    </Dialog>
  </div>
</template>

<script>
import PermanentFull from "../PermanentFull/PermanentFull.vue";
import Dialog from "../Dialog/Dialog.vue";
import MenuUser from "../../data/MenuUser.js";
import Vue from "vue";
import { StripePlugin } from "@vue-stripe/vue-stripe";
import moment from "moment";
import { mapGetters } from "vuex";
import axios from "axios";
import { API_URL } from "../../utils/Constant";

const options = {
  pk: `${process.env.VUE_APP_STRIPE_PUBLISHABLE_KEY}`,
};

Vue.use(StripePlugin, options);

export default {
  name: "Commande",
  components: {
    PermanentFull,
    Dialog,
  },
  methods: {
    pointToComma(val) {
      return val.toString().replace(".", ",");
    },
    setAllFalse() {
      this.showDialog = false;
      this.showDialogError = false;
      this.showDialogListeCouples = false;
    },
    toggleDialog() {
      this.showDialog = !this.showDialog;
    },
    toggleDialogError() {
      this.showDialogError = !this.showDialogError;
    },
    toggleListeCouples() {
      this.setAllFalse();
      this.showDialogListeCouples = !this.showDialogListeCouples;
    },
    async keepCouple() {
      const payload = {
        couple: this.arraySymbol,
      };
      try {
        await this.$store.dispatch("downgrade", {
          payload: payload,
          token: localStorage.getItem("token"),
        });
        this.showDialogListeCouples = false;
        this.toggleDialog();
      } catch (e) {
        //
      }
    },
    init() {
      this.subscription = this.getSubscription;
      this.reductionSubscription = this.getSubscription.reduction / 100;
      const temp =
        (this.subscription.price -
          this.subscription.price * this.reductionSubscription) *
        12;
      this.price =
        this.$route.params.status == "mensuel" ? this.subscription.price : temp;
      this.ogPrice = this.price;
      this.price = this.price < this.prorata ? 0 : this.price - this.prorata;
      this.withReduction =
        this.$route.params.status == "mensuel" ? false : true;
      this.totalCommande = this.price;
      this.inputTotal = this.totalCommande;
    },

    getSubscriptionById: async function() {
      try {
        await this.$store.dispatch("getSubscriptionById", {
          id: this.$route.params.typeId,
          token: localStorage.getItem("token"),
        });
        this.numberCoupleOffered = this.getSubscription.number_couple_offered;
        this.init();
      } catch (e) {
        //
      }
    },
    loadClient: async function() {
      try {
        await this.$store.dispatch("loadClients", {
          token: localStorage.getItem("token"),
        });
        this.creditClient = this.client.reward.sum.toFixed(2);
      } catch (e) {
        //
      }
    },
    errorFieldStripeValue(cardNumber = null, cvc = null, mmaa = null) {
      this.cardNumberErrorMessage = cardNumber;
      this.CVC_ErrorMessage = cvc;
      this.MMAA_ErrorMessage = mmaa;
    },
    handleErrorField(error) {
      switch (error.message) {
        case this.cardNumberErrorEmpty.trim():
          this.errorFieldStripeValue(this.$t("cardNumberErrorEmpty"));
          break;
        case this.cardNumberErrorInvalid.trim():
          this.errorFieldStripeValue(this.$t("cardNumberErrorInvalid"));
          break;
        case this.CVC_ErrorMessageText.trim():
          this.errorFieldStripeValue(null, this.$t("CVC_ErrorMessageText"));
          break;
        case this.MMAA_ErrorDate.trim():
          this.errorFieldStripeValue(null, null, this.$t("MMAA_ErrorDate"));
          break;
        case this.MMAA_ErrorDatePast.trim():
          this.errorFieldStripeValue(null, null, this.$t("MMAA_ErrorDatePast"));
          break;
        case this.MMAA_ErrorYear.trim():
          this.errorFieldStripeValue(null, null, this.$t("MMAA_ErrorYear"));
          break;
        default:
          this.errorFieldStripeValue();
          break;
      }
    },
    async createToken() {
      this.loader = true;
      this.cardNumber;
      this.cardExpiry;
      this.cardCvc;
      this.EmptyNameErrorMessage = !this.name
        ? this.$t("emptyNameErrorMessageText")
        : null;
      if (!this.errorCreditValue) {
        const { token, error } = await this.$stripe.createToken(
          this.cardNumber
        );

        error ? this.handleErrorField(error) : this.errorFieldStripeValue();
        if (token) this.getToken = token.id;

        await this.loadPayement();
      }
    },
    async loadPayement() {
      const duration = this.$route.params.status == "mensuel" ? 30 : 365;

      const payload = {
        discount_credit: +this.credit,
        discount_code: +this.codePromotion,
        subscribe: +this.$route.params.typeId,
        duration: +duration,
        author: this.name,
        card_token: this.getToken,
        code: this.setCodePromotion,
      };

      if (this.name.length !== 0 && this.getToken.length !== 0) {
        try {
          await this.$store.dispatch("paymentCommand", {
            token: localStorage.getItem("token"),
            payload,
          });
          await this.getSubscriptionById();
          await this.loadClient();
          this.initData();
          if (
            this.nbrUserCouple > this.numberCoupleOffered &&
            this.numberCoupleOffered != 0
          )
            this.toggleListeCouples();
          else this.toggleDialog();
        } catch (error) {
          if (error.response.status === 409) {
            this.errorDowngrade = this.$t("downgrade:message");
            this.toggleDialogError();
          }
        }
      }
      this.getToken = "";
      this.loader = false;
    },
    initData() {
      this.codePromotion = 0;
      this.credit = 0;
    },
    formatDate(item) {
      return moment().format("YYYY-MM-DD") > item ? true : false;
    },
    getUserCouple: async function() {
      try {
        await this.$store.dispatch("getUserCouple", {
          token: localStorage.getItem("token"),
        });
        this.listUserCouple = this.userCouple.data;
        this.nbrUserCouple = this.listUserCouple.length;
      } catch (e) {
        //
      } finally {
        this.loading = false;
      }
    },
    getReduction: async function(e) {
      e.preventDefault();
      this.errorCodePromo = [];
      const payload = {
        code: this.setCodePromotion,
        subscribe: +this.$route.params.typeId,
      };
      try {
        const response = await axios.post(
          `${API_URL}/api/use_reduction`,
          payload,
          {
            headers: {
              Authorization: `Bearer ${localStorage.getItem("token")}`,
            },
          }
        );
        await this.$store.dispatch("useReduction", {
          id: this.id,
          payload: payload,
          token: localStorage.getItem("token"),
        });
        this.promotion = +response.data.data;
        this.promotion = this.$store.state.reduction.code.data;
        this.codePromotion = (this.price * this.promotion) / 100;
        this.inputTotal = this.price - this.codePromotion - this.credit;
      } catch (e) {
        const error = e.response.data.Error;
        if (error === "Reduction code not found")
          this.errorCodePromo.push(this.$t("reductionNotFound"));
        if (error === "Code used already")
          this.errorCodePromo.push(this.$t("codeUsed"));
        if (error === "Code expired")
          this.errorCodePromo.push(this.$t("codeExpired"));
        if (error === "Code inapproprié à votre abonnement")
          this.errorCodePromo.push(this.$t("codeInappropriate"));
      }
    },
    numericOnly(e) {
      if (e.charCode >= 48 && e.charCode <= 57) {
        return true;
      }
      return e.preventDefault();
    },
    async setProrata() {
      const payload = {
        subscribe: +this.$route.params.typeId,
      };
      try {
        await this.$store.dispatch("prorata", {
          token: localStorage.getItem("token"),
          payload: payload,
        });
        this.prorata = +this.$store.state.payment.prorata.prorata;
      } catch (e) {
        //
      }
    },
  },

  data: () => {
    return {
      errorCodePromo: [],
      loading: false,
      token: null,
      prorata: 0,
      ogPrice: 0,
      cardNumber: null,
      cardExpiry: null,
      cardCvc: null,
      buttonCodePromo: true,
      inputTotal: 0,
      visible: false,
      loader: false,
      creditClient: 0,
      errorDowngrade: "",
      showDialog: false,
      showDialogError: false,
      showDialogListeCouples: false,
      menuItems: MenuUser,
      subscription: {},
      listUserCouple: [],
      arraySymbol: [],
      reductionSubscription: 0,
      numberCoupleOffered: 0,
      promotion: 0,
      price: 0,
      name: "",
      errorToMuchCouple: "",
      initialPrice: 0,
      errorCreditValue: "",
      getToken: "",
      date: "",
      cvc: "",
      setCodePromotion: "",
      codePromotion: 0,
      credit: "",
      disableButton: true,
      totalCommande: 0,
      withReduction: null,
      EmptyNameErrorMessage: null,
      cardNumberErrorMessage: null,
      MMAA_ErrorMessage: null,
      CVC_ErrorMessage: null,

      emptyNameErrorMessageText: "Ajouter le nom du proprietaire.",

      cardNumberErrorEmpty: "Votre numéro de carte est incomplet.",
      cardNumberErrorInvalid: "Votre numéro de carte n'est pas valide.",

      MMAA_ErrorDate: "La date d'expiration de votre carte est incomplète.",
      MMAA_ErrorDatePast: "La date d'expiration de votre carte est passée.",
      MMAA_ErrorYear: "L'année d'expiration de votre carte est passée.",

      CVC_ErrorMessageText: "Le code de sécurité de votre carte est incomplet.",

      iconCheck: `
        <svg id="done_black_24dp" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
          <path id="Tracé_42162" data-name="Tracé 42162" d="M0,0H24V24H0Z" fill="none"/>
          <path id="Tracé_42163" data-name="Tracé 42163" d="M9,16.2,4.8,12,3.4,13.4,9,19,21,7,19.6,5.6Z" fill="#21a179"/>
        </svg>
      `,
      iconDialog: `
          <svg id="account_circle-24px" xmlns="http://www.w3.org/2000/svg" width="92" height="92" viewBox="0 0 92 92">
            <path id="Tracé_2166" data-name="Tracé 2166" d="M0,0H92V92H0Z" fill="none"/>
            <g id="Groupe_14044" data-name="Groupe 14044" transform="translate(7.629 7.705)">
              <path id="Tracé_19671" data-name="Tracé 19671" d="M162.639,159.613c-.275.33-.533.678-.829.989q-11.931,12.529-23.869,25.051c-.421.441-.864.832-1.531.57a1.752,1.752,0,0,1-.578-.384q-5.724-5.708-11.435-11.43a1.188,1.188,0,0,1-.324-1.459,1.086,1.086,0,0,1,1.252-.616,1.949,1.949,0,0,1,.833.51q5.108,5.078,10.193,10.179c.129.129.264.251.35.333.38-.348.757-.656,1.091-1.005q11.327-11.852,22.646-23.712a1.218,1.218,0,0,1,1.846-.205,3.765,3.765,0,0,1,.355.474Z" transform="translate(-104.921 -133.831)" fill="#f8bd25"/>
              <path id="Tracé_19672" data-name="Tracé 19672" d="M38.362,76.742q-1.469,0-2.941-.112A38.363,38.363,0,1,1,69.557,60.736a1.5,1.5,0,1,1-2.434-1.75,35.373,35.373,0,1,0-8.136,8.137,1.5,1.5,0,1,1,1.749,2.434A38.365,38.365,0,0,1,38.362,76.742Z" transform="translate(0 0)" fill="#242c36"/>
              <path id="Tracé_19673" data-name="Tracé 19673" d="M411.609,413.108a1.5,1.5,0,1,1,1.06-.439A1.51,1.51,0,0,1,411.609,413.108Z" transform="translate(-347.165 -347.165)" fill="#242c36"/>
            </g>
          </svg>
        `,
    };
  },
  watch: {
    arraySymbol(val) {
      this.errorToMuchCouple = "";
      this.disableButton = val.length ? false : true;
      if (val.length > this.numberCoupleOffered) {
        this.disableButton = true;
        this.errorToMuchCouple = `${this.$t("chooseOnly")} ${
          this.numberCoupleOffered
        } ${this.$t("couple")}`;
      }
    },
    credit(val) {
      const priceWithPromo = this.totalCommande - this.codePromotion;
      if (+this.creditClient < +val) {
        this.errorCreditValue = this.$t("insufficientCredits");
        this.visible = true;
      } else if (priceWithPromo < val) {
        this.errorCreditValue = `${this.$t(
          "errorCreditValue1"
        )} ${this.pointToComma(+priceWithPromo.toFixed(2))}€ ${this.$t(
          "errorCreditValue2"
        )}`;
        this.inputTotal = 0;
        this.visible = true;
      } else {
        this.inputTotal = this.price - this.codePromotion - val;
        this.errorCreditValue = "";
        this.visible = false;
      }
    },
    setCodePromotion(val) {
      this.buttonCodePromo = val.length ? false : true;
      if (!val) {
        this.codePromotion = 0;
        this.inputTotal = this.price - this.codePromotion - val;
      }
    },
    name(val) {
      this.EmptyNameErrorMessage = !val
        ? this.$t("emptyNameErrorMessageText")
        : null;
    },
  },
  computed: {
    ...mapGetters(["userCouple"]),
    stripeElements() {
      return this.$stripe.elements();
    },
    client() {
      return this.$store.state.client.clients;
    },
    reduction() {
      return this.$store.state.reduction.reductions.results;
    },
    getSubscription() {
      return this.$store.state.subscription.subscriptionId.data;
    },
  },
  async mounted() {
    this.loading = true;
    const style = {
      base: {
        color: "black",
        fontFamily: '"Helvetica Neue", Helvetica, sans-serif',
        fontSmoothing: "antialiased",
        fontSize: "14px",
        "::placeholder": {
          color: "#aab7c4",
        },
      },
      invalid: {
        color: "#fa755a",
        iconColor: "#fa755a",
      },
    };
    this.cardNumber = this.stripeElements.create("cardNumber", { style });
    this.cardNumber.mount("#card-number");
    this.cardExpiry = this.stripeElements.create("cardExpiry", { style });
    this.cardExpiry.mount("#card-expiry");
    this.cardCvc = this.stripeElements.create("cardCvc", { style });
    this.cardCvc.mount("#card-cvc");
    await this.setProrata();
    await this.getSubscriptionById();
    await this.getUserCouple();
    await this.loadClient();
    this.loading = false;
  },
  beforeDestroy() {
    this.cardNumber.destroy();
    this.cardExpiry.destroy();
    this.cardCvc.destroy();
  },
};
</script>

<style>
.boxInput {
  margin-bottom: 1rem;
}
.boxInput > .form-group {
  border: 1px solid var(--line);
  border-radius: 4px;
  color: var(--black);
  font-size: 14px;
  padding: 16px 0.75rem;
  margin: 0;
  position: relative;
  z-index: 1;
}
.boxInput > .form-group label {
  background: #fff;
  color: var(--placeholder);
  font-size: 10px;
  line-height: 20px;
  margin: 0;
  position: absolute;
  left: 10px;
  top: -10px;
  padding: 0 10px;
  transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
  width: auto;
}
.boxInputError .form-group {
  border: 1px solid var(--rouge);
}
</style>

<style scoped>
@media (max-width: 639px) {
  .md-app-content {
    padding: 8px;
  }
}
#custom-button {
  height: 30px;
  outline: 1px solid grey;
  background-color: green;
  padding: 5px;
  color: white;
}
#card-error {
  color: red;
  margin-bottom: 8px;
}
#commande .titre-page {
  color: #5c626a;
  font-family: "Poppins-Medium", Arial, Helvetica, sans-serif;
  font-size: 20px;
  line-height: 24px;
}
#commande .description {
  color: var(--black);
  font-size: 14px;
  padding-left: 52px;
  padding-right: 52px;
  max-width: 500px;
}
#commande .titre-wrapper .titre {
  color: var(--black);
  font-family: "Poppins-Bold", Arial, Helvetica, sans-serif;
  font-size: 24px;
  letter-spacing: 0.18px;
  line-height: 24px;
}
#commande .bloc-content {
  padding: 20px;
}
@media (max-width: 639px) {
  #commande .bloc-content {
    padding: 0;
  }
}
@media (max-width: 639px) {
  #commande .bloc-content.bloc-noir {
    padding: 10px;
  }
}
@media (min-width: 1200px) {
  #commande .column-wrapper {
    flex-wrap: nowrap;
  }
}

#commande .column-wrapper .left {
  flex: 1 1 1196px;
  max-width: 1196px;
}
@media (max-width: 600px) {
  #commande .column-wrapper .left {
    max-width: 100%;
  }
}
#commande .column-wrapper .right {
  margin-left: 24px;
  flex: 1 0 100%;
  max-width: 426px;
}
@media (max-width: 1200px) {
  #commande .column-wrapper .right {
    flex: 1 1 1196px;
    max-width: 1196px;
    margin-top: 20px;
    margin-left: 0;
  }
}
#commande .paiement-description {
  font-size: 12px;
  letter-spacing: 0.12px;
}
#commande .titre-resume {
  letter-spacing: 0.18px;
  font-size: 24px;
  line-height: 24px;
  margin-bottom: 10px;
}
@media (max-width: 479px) {
  #commande .titre-resume {
    font-size: 18px;
  }
}
@media (max-width: 414px) {
  #commande .titre-resume {
    font-size: 16px;
  }
}
#commande .pseudo-label {
  font-family: "Poppins-Medium", Arial, Helvetica, sans-serif;
  letter-spacing: 0.25px;
}
#commande .remind-bloc {
  border-radius: 12px;
  background-color: #f6f6f7;
  padding: 10px;
  text-align: center;
}
@media (min-width: 415px) {
  #commande .remind-bloc {
    display: flex;
    text-align: unset;
    align-items: center;
    justify-content: space-between;
  }
}
#commande .remind-bloc .price,
#commande .remind-bloc .number {
  font-size: 18px;
  letter-spacing: 0.32px;
}
@media (max-width: 414px) {
  #commande .remind-bloc .price,
  #commande .remind-bloc .labeled {
    font-size: 14px;
  }
}
#commande .remind-bloc .labeled {
  font-family: "Poppins-Regular", Arial, Helvetica, sans-serif;
}
#commande .remind-bloc .labeled .number,
#commande .remind-bloc .price {
  font-family: "Poppins-Medium", Arial, Helvetica, sans-serif;
}
@media (max-width: 414px) {
  #commande .remind-bloc .labeled .number,
  #commande .remind-bloc .price {
    font-family: "Poppins-Semibold", Arial, Helvetica, sans-serif;
  }
}

#commande .remind-bloc.detail {
  text-align: left;
}
@media (max-width: 414px) {
  #commande .item-detail,
  #commande .item-detail .number {
    font-size: 11px;
    text-align: left;
  }
}
#commande .item-detail svg {
  font-size: 1.25rem;
  width: 20px;
}
#commande .title-details {
  font-family: "Poppins-Bold", Arial, Helvetica, sans-serif;
  letter-spacing: 0.25px;
  font-size: 16px;
}
#commande .text {
  font-size: 16px;
  color: var(--primary);
}
#commande .md-suffix {
  right: 10px;
}
#commande .bloc-noir {
  background-color: black;
  color: var(--placeholder);
}
#commande .bloc-noir .item {
  display: flex;
  align-items: center;
  justify-content: space-between;
  text-align: left;
  margin-bottom: 10px;
}
@media (max-width: 414px) {
  #commande .bloc-noir .item {
    flex-direction: column;
    align-items: center;
  }
}
@media (max-width: 414px) {
  #commande .bloc-noir .item span:not(.pseudo-label) {
    padding-top: 5px;
  }
}
#commande .bloc-noir span + span {
  color: #fff;
}
#commande .bloc-noir .pseudo-label {
  font-family: "Poppins-Regular", Arial, Helvetica, sans-serif;
}
#commande .bloc-noir .total span {
  font-size: 16px;
  font-family: "Poppins-Regular", Arial, Helvetica, sans-serif;
}
#commande .bloc-noir .total span:not(.pseudo-label) {
  font-family: "Poppins-Semibold", Arial, Helvetica, sans-serif;
}
@media (max-width: 479px) {
  #commande .bloc-noir .total span {
    font-size: 14px;
  }
}
.text-button {
  font-size: 14px;
}
@media (max-width: 479px) {
  .text-button {
    font-size: 12px;
  }
}
@media (max-width: 479px) {
  #commande .list-paiements {
    flex-wrap: wrap;
  }
}
@media (max-width: 479px) {
  #commande .code-promotion-group .pseudo-label {
    display: inline-block;
    margin-bottom: 5px;
  }
}
#commande .code-promotion-group .code-promotion-content {
  flex-wrap: wrap;
}
@media (min-width: 480px) {
  #commande .code-promotion-group .code-promotion-content {
    flex-wrap: nowrap;
  }
}
#commande .code-promotion-group .code-promotion-content .md-field {
  margin: 0 0 15px;
  flex: 1 1 100%;
}
@media (min-width: 480px) {
  #commande .code-promotion-group .code-promotion-content .md-field {
    margin-right: 0.25rem;
    margin-bottom: 0;
  }
}
#commande .code-promotion-group .code-promotion-content .btn-submit {
  margin: 0 auto !important;
  max-width: 165px;
}
@media (min-width: 480px) {
  #commande .code-promotion-group .code-promotion-content .btn-submit {
    margin: 0 !important;
  }
}
.back i {
  margin-right: 12px;
  vertical-align: middle;
}
.form-abonnement {
  max-width: 500px;
}
.div-stripe-error {
  line-height: 1.2;
}
.div-stripe-error .error {
  line-height: inherit;
}
#commande .credit-fields {
  margin-bottom: 1rem;
}
#commande .credit-fields .details {
  margin: 0;
  text-align: center;
  padding-right: 15px;
}
#commande .credit-fields .details svg {
  font-size: 1.5em;
  height: auto;
  margin-bottom: 5px;
  width: 1.5rem;
}
#commande .credit-fields .details .text {
  display: block;
  text-align: center;
}
</style>
